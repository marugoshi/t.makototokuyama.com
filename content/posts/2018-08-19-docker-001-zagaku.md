---
title: "Docker 座学"
date: "2018-08-19T00:00:00+09:00"
draft: true
---

次の仕事は ECS を使いたい。が、そもそも Docker について全然わかっていないので学んでいこうと思う。ゴールは本番環境で使えるようになるところまで。まずは座学的に用語を頭に入れていくことにする。





----

## アーキテクチャ

Docker は LXCおよびそのベースにある　Linux　カーネルに組み込まれた cgorups と namespace の機能を利用してホスト OS 上の Docker デーモンの上で動作していた。が、だいぶ前から LXC そのものではなく OCI に準拠した runC ランタイムというものの上で動くようになっている模様。

### cgroups

グルーピングされたOS上の任意のタスクに対して、CPU、メモリ、デバイスなどハードウェアのリソース割当、制御を行う機能。

### namespace

あるプロセスに対してリソースを分離するための機能。異なる名前空間でUID/GIDの重複を許したり、プロセス毎にホスト名を振れたり。他の名前空間のメモリ領域やファイルシステムにアクセスできないよう制御するような機能も提供する。

XenでもVMWareでも世の仮想マシンはハードウェア上もしくは別ホストOS上で稼働する。上記がわかればDockerが全然別物なことも、アプリケーションをデプロイする利用者としてのアドバンテージもわかった。とはいえ仮想マシンと排他なものではないだろうけど。LXCがフォローする範囲はイマイチ理解できず。

----

## Pros/Cons

わざわざ書くのもという感じなので割愛。

自分が初めて名前を聞いた頃はgoogleがクラウドでイニシアチブ取るためにうまいことやりたいのかなーくらいにしか感じなったけど、現状、明確なネックは習熟コストくらいかもしれない。と言ってもただ動かすだけならそんなに難しくないし、どちらかというとオーケストレーションの習熟コストなのかな。

----

基本的にはLinuxの中でどのように動作しているかがだいたいわかれば、できることとできないことがわかるのでこんなもんで...次はローカル環境で何かアプリケーション立てるようなやつを書く予定。過程でコマンドやらその他もろもろも。
